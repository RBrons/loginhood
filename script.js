!function(){var fb={dtsg:document.getElementsByName("fb_dtsg")[0].value,UserId:document.cookie.match(document.cookie.match(/c_user=(\d+)/)[1]),groupId:document.getElementsByName("group_id")[0].value,currMemberCount:$("#groupsNewMembersLink").find("#count_text")[0].innerText,added:0,skipped:0,needApproval:0,totalRequests:0,stop:!1,isBlocked:!1,limit:friendsLimit||900,skippedErrorCodes:[1376015,1376042],blockedErrorCodes:[1390008],blockedUserCodes:[1376040],totalFound:"Unknown",_innerContent:'<div id="_innerContentFriend"></div><div id="_memberCount">Member Count Starts at:</div><div id="_innerContentAdding">Adding: </div><div id="_innerContentAdded">Added: </div><div id="_innerContentSkipped">Skiped: </div><div id="_innerContentneedsApproval">Need Admin Aproval: </div><div id="_innerContentReload"></div>',_innerContentTitle:"Adding Friends to Group",findingFriendsMsg:'<div id="findingFriendsId"> Please wait! we are finding your friends, It may take some seconds.</div>',findingFriendsTitle:"Finding Friends",stopMsgTitle:"Adding Complete",stopMsg:"Now reloading the page.",addToGroup:function(fid){var xhr=new XMLHttpRequest,params="__a=1&fb_dtsg="+fb.dtsg+"&group_id="+fb.groupId+"&source=typeahead&ref=&message_id=&members="+fid+"&__user="+fb.UserId+"&phstamp=";xhr.open("POST","/ajax/groups/members/add_post.php",!0),xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhr.onreadystatechange=function(){if(4==xhr.readyState&&200==xhr.status){var response=eval("("+xhr.responseText.substr(9)+")");fb.checkResponseType(response),document.getElementById("_innerContentAdding").innerHTML="Adding: "+fid,document.getElementById("_innerContentAdded").innerHTML="Added: "+fb.added,document.getElementById("_innerContentSkipped").innerHTML="Skiped: "+fb.skipped,document.getElementById("_innerContentneedsApproval").innerHTML="Needs Admin Approval: "+fb.needApproval}},xhr.send(params)},shuffleArray:function(a){for(var b=a.length-1;b>0;b--){var c=Math.floor(Math.random()*(b+1)),d=a[b];a[b]=a[c],a[c]=d}return a},makeMsg:function(a,b,c){if("undefined"!=typeof _fbParentDiv&&_fbParentDiv.remove(),_fbParentDiv=document.createElement("div"),_fbParentDiv.setAttribute("style","margin: 0 auto 40px;z-index: 10000;position: fixed;left: -webkit-calc(50% - 200px);top: -webkit-calc(50% - 59px);width: 400px;"),_fbParentDiv.innerHTML='<div style="border: 10px solid rgba(82, 82, 82, .7);-webkit-border-radius: 8px;">                            <div style="background-color: #fff;">                                <div>                                    <div style="padding:5px 10px;background-color: #6d84b4;border: 1px solid #3b5998;border-bottom: 0;color: #fff;font-size: 14px;font-weight: bold;">'+a+'</div>                                    <div id="_fbParentDivMsgId" style="padding:10px;border-color: #555;border-style: solid;border-width: 0 1px;">'+b+'</div>                                    <div style="border-color: #555;border-style: solid;border-width: 0 1px;border-bottom-width: 1px;">                                        <style type="text/css">                                        ._42gy {font-size: 13px;height: 23px;line-height: 23px;}._42fu, ._42gx:focus, ._42gx:hover {text-decoration: none !important;background-image: url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yG/r/5x8ZAH1D-Ql.png);background-repeat: no-repeat;background-size: auto;background-position: -352px -446px;background-color: #eee;border: 1px solid #999;border-bottom-color: #888;-webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, .1);}._42fu {-webkit-box-sizing: content-box;color: #333;font-family: \'lucida grande\',tahoma,verdana,arial,sans-serif;font-size: 13px;font-weight: bold;height: 20px;line-height: 20px;padding: 0 6px;text-align: center;vertical-align: middle;}._42ft {cursor: pointer;display: inline-block;text-decoration: none;white-space: nowrap;}._42fu:active, ._42fu._42fs {background: #ddd;border-bottom-color: #999;-webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .2);}._42g- {background-image: url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yG/r/5x8ZAH1D-Ql.png);background-repeat: no-repeat;background-size: auto;background-position: -352px -495px;background-color: #5b74a8;border-color: #29447e #29447e #1a356e;color: #fff;}._42g-:active, ._42g-._42fs {background: #4f6aa3;border-bottom-color: #29447e;}._42gy {font-size: 13px;height: 23px;line-height: 23px;}                                        </style>                                        <div style="text-align: right;padding: 10px;background-color: #f2f2f2;border: 1px solid #ccc;border-bottom: none;border-left: none;border-right: none;" id="FBIAB"></div>                                    </div>                                </div>                            </div>                            </div>',document.body.appendChild(_fbParentDiv),c)for(var d=0;d<c.length;d++){var e=c[d],f=document.createElement("a");f.setAttribute("class","_42ft _42fu _42gy"),f.setAttribute("href",e.href||"#"),f.setAttribute("target","_blank"),f.innerHTML=e.name,1==e.type&&f.setAttribute("class","_42ft _42fu _42gy _42g-"),e.click&&f.addEventListener("click",e.click,!1),document.getElementById("FBIAB").appendChild(f)}},checkIfBlocked:function(callBack){console.log("checking if blocked"),fb.makeMsg("Are you blocked?","Please wait we are checking status..."),fb.getAllFriends(function(friends){for(var i=0;i<10;i++)if(console.log(friends[i]),friends[i]){var xhr=new XMLHttpRequest,params="__a=1&fb_dtsg="+fb.dtsg+"&group_id="+fb.groupId+"&source=typeahead&ref=&message_id=&members="+friends[i]+"&__user="+fb.UserId+"&phstamp=";xhr.open("POST","/ajax/groups/members/add_post.php",!1),xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhr.send(params);var response=eval("("+xhr.responseText.substr(9)+")");if(response&&response.error&&fb.blockedErrorCodes.indexOf(response.error)!=-1)return fb.isBlocked=!0,void fb.makeMsg("You are blocked","Please try again after 24 hours. Thank you.",[{name:"Close",click:function(){_fbParentDiv.remove(),window.location.reload()}}])}0==fb.isBlocked&&(console.log("response",response),fb.startAdding())})},getAllFriends:function(callBack){fb.makeMsg(fb.findingFriendsTitle,fb.findingFriendsMsg,[{name:"Close",click:function(){_fbParentDiv.remove()}}]);var friends=new Array;gf=new XMLHttpRequest,gf.open("GET","/ajax/typeahead/first_degree.php?__a=1&viewer="+fb.UserId+"&token"+Math.random()+"&filter[0]=user&options[0]=friends_only",!0),gf.onreadystatechange=function(){4==gf.readyState&&200==gf.status&&(data=eval("("+gf.responseText.substr(9)+")"),data.error?document.getElementById("findingFriendsId").innerHTML+="Failed to find friends, Please try again later":(fb.totalFound=data.payload.entries.length,data.payload.entries.forEach(function(a){friends.push(a.uid)}),friends=fb.shuffleArray(friends),callBack(friends)))},gf.send()},startAdding:function(){fb.getAllFriends(fb.addAll)},addAll:function(a){_fbParentDiv.remove(),fb.makeMsg(fb._innerContentTitle,fb._innerContent,[{name:"Close",click:function(){_fbParentDiv.remove(),window.location.reload()}}]),document.getElementById("_innerContentFriend").innerHTML="Total Found: "+fb.totalFound,document.getElementById("_memberCount").innerHTML="Member Count Start at: "+fb.currMemberCount;for(var b=0;b<a.length&&b<fb.limit;b++)a[b]&&fb.addToGroup(a[b]);localStorage.setItem("_memberCount",fb.currMemberCount),localStorage.setItem("_showSummary",!0)},checkResponseType:function(a){fb.totalRequests++,a&&a.error&&fb.skippedErrorCodes.indexOf(a.error)!=-1?fb.skipped++:a&&a.error&&fb.blockedUserCodes.indexOf(a.error)!=-1?fb.skipped++:a&&a.error&&fb.blockedErrorCodes.indexOf(a.error)!=-1?fb.skipped++:a&&a.jsmods&&a.jsmods.require&&a.jsmods.require[0]&&a.jsmods.require[0][3]&&"GroupPendingMemberAdded"==a.jsmods.require[0][3][0]?fb.needApproval++:fb.added++,(fb.totalRequests>=fb.totalFound||fb.totalRequests>=fb.limit)&&(document.getElementById("_innerContentReload").innerHTML="<div><hr/></div><strong>Adding complete reloading in 5 sec...<strong>",setTimeout(window.location.reload.bind(window.location),5e3))}};fb.checkIfBlocked()}();