var friendsLimit=900,executeFile=function(){chrome.tabs.executeScript({file:"script.js"}),window.close()},setConfig=function(){chrome.tabs.executeScript({code:"friendsLimit="+friendsLimit+";"})},getConfig=function(){chrome.storage.sync.get({friendsLimit:900},function(a){friendsLimit=a.friendsLimit})},start=function(){setConfig();var a={success:executeFile,error:showErrorMsg};isValidGroup(a)},cancel=function(){window.close()},showErrorMsg=function(){$(".alert").show()},isValidGroup=function(a){chrome.tabs.query({active:!0,currentWindow:!0},function(b){chrome.tabs.sendMessage(b[0].id,{msg:"isvalidgroup"},function(b){b&&1==b.res?a.success():a.error()})})},showSettings=function(){chrome.tabs.create({url:"chrome://extensions/?options="+chrome.runtime.id})},extarctIds=function(){chrome.tabs.executeScript({file:"js/extract.js"})},showIds=function(a){a=a.join("\r\n"),document.getElementById("fbids").value=a};document.addEventListener("DOMContentLoaded",function(){var a=document.getElementById("start"),b=document.getElementById("cancel"),c=document.getElementById("settings"),d=document.getElementById("extract");a.addEventListener("click",start),b.addEventListener("click",cancel),c.addEventListener("click",showSettings),d.addEventListener("click",extarctIds),$(".close").click(function(){$(".alert").hide()})}),chrome.runtime.onMessage.addListener(function(a,b,c){"friendIds"==a.type&&showIds(a.ids)}),document.addEventListener("DOMContentLoaded",getConfig);